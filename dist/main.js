(()=>{"use strict";class e{constructor(e,s,t,a){this.rus=t,this.rusShifted=a,this.eng=e,this.engShifted=s,this.keyElement=this.makeKeyElement()}makeKeyElement(){let e=document.createElement("div"),s=document.createElement("div"),t=document.createElement("div"),a=document.createElement("span");e.classList.add("key"),t.classList.add("eng"),s.classList.add("rus"),s.hidden=!0,e.append(t),e.append(s);for(let e=0;e<4;e++)switch(a=document.createElement("span"),e){case 0:a.innerHTML=this.eng,t.append(a);break;case 1:a.innerHTML=this.engShifted,t.append(a),a.hidden=!0;break;case 2:a.innerHTML=this.rus,s.append(a),a.hidden=!0;break;case 3:a.innerHTML=this.rusShifted,s.append(a),a.hidden=!0}return e}}const s="`1234567890-=   qwertyuiop[]\\  asdfghjkl;'  zxcvbnm,./".split(""),t='~!@#$%^&*()_+   QWERTYUIOP{}|  ASDFGHJKL:"  ZXCVBNM<>?'.split(""),a="ё1234567890-=   йцукенгшщзхъ\\  фывапролджэ  ячсмитьбю.".split(""),p='Ё!"№;%:?*()_+   ЙЦУКЕНГШЩЗХЪ/  ФЫВАПРОЛДЖЭ  ЯЧСМИТЬБЮ,'.split(""),u={"`":"Backquote"," 1":"Digit1"," 2":"Digit2"," 3":"Digit3"," 4":"Digit4"," 5":"Digit5"," 6":"Digit6"," 7":"Digit7"," 8":"Digit8"," 9":"Digit9"," 0":"Digit0","-":"Minus","=":"Equal",Backspace:"Backspace",Delete:"Delete",Tab:"Tab",q:"KeyQ",w:"KeyW",e:"KeyE",r:"KeyR",t:"KeyT",y:"KeyY",u:"KeyU",i:"KeyI",o:"KeyO",p:"KeyP","[":"BracketLeft","]":"BracketRight","\\":"Backslash",Home:"Home",Capslock:"CapsLock",a:"KeyA",s:"KeyS",d:"KeyD",f:"KeyF",g:"KeyG",h:"KeyH",j:"KeyJ",k:"KeyK",l:"KeyL",";":"Semicolon","'":"Quote",Enter:"Enter",ShiftLeft:"ShiftLeft",z:"KeyZ",x:"KeyX",c:"KeyC",v:"KeyV",b:"KeyB",n:"KeyN",m:"KeyM",",":"Comma",".":"Period","/":"Slash",ShiftRight:"ShiftRight","&and;":"ArrowUp",End:"End",Ctrl:"ControlLeft",Alt:"AltLeft",Space:"Space","Alt ":"AltRight","Ctrl ":"ControlRight","&lt;":"ArrowLeft","&or;":"ArrowDown",">":"ArrowRight"};let h=[],n=[],c=[],l=[];for(let e=0;e<65;e++)switch(e){case 0:h.push("`"),n.push("~"),c.push("ё"),l.push("Ё");break;case 1:h.push("1"),n.push("1"),c.push("1"),l.push("1");break;case 2:h.push("2"),n.push("2"),c.push("2"),l.push("2");break;case 3:h.push("3"),n.push("3"),c.push("3"),l.push("3");break;case 4:h.push("4"),n.push("4"),c.push("4"),l.push("4");break;case 5:h.push("5"),n.push("5"),c.push("5"),l.push("5");break;case 6:h.push("6"),n.push("6"),c.push("6"),l.push("6");break;case 7:h.push("7"),n.push("7"),c.push("7"),l.push("7");break;case 8:h.push("8"),n.push("8"),c.push("8"),l.push("8");break;case 9:h.push("9"),n.push("9"),c.push("9"),l.push("9");break;case 10:h.push("0"),n.push("0"),c.push("0"),l.push("0");break;case 11:h.push("-"),n.push("_"),c.push("-"),l.push("_");break;case 12:h.push("="),n.push("+"),c.push("="),l.push("+");break;case 13:h.push("Backspace"),n.push("Backspace"),c.push("Backspace"),l.push("Backspace");break;case 14:h.push("DEL"),n.push("DEL"),c.push("DEL"),l.push("DEL");break;case 15:h.push("TAB"),n.push("TAB"),c.push("TAB"),l.push("TAB");break;case 29:h.push("HOME"),n.push("HOME"),c.push("HOME"),l.push("HOME");break;case 30:h.push("CapsLock"),n.push("CapsLock"),c.push("CapsLock"),l.push("CapsLock");break;case 42:h.push("Enter"),n.push("Enter"),c.push("Enter"),l.push("Enter");break;case 43:case 54:h.push("Shift"),n.push("Shift"),c.push("Shift"),l.push("Shift");break;case 55:h.push("&and;"),n.push("&and;"),c.push("&and;"),l.push("&and;");break;case 56:h.push("END"),n.push("END"),c.push("END"),l.push("END");break;case 57:case 61:h.push("CTRL"),n.push("CTRL"),c.push("CTRL"),l.push("CTRL");break;case 58:case 60:h.push("ALT"),n.push("ALT"),c.push("ALT"),l.push("ALT");break;case 59:h.push("RollingScopesSchool"),n.push("RollingScopesSchool"),c.push("RollingScopesSchool"),l.push("RollingScopesSchool");break;case 62:h.push("<"),n.push("<"),c.push("<"),l.push("<");break;case 63:h.push("&or;"),n.push("&or;"),c.push("&or;"),l.push("&or;");break;case 64:h.push(">"),n.push(">"),c.push(">"),l.push(">");break;default:h.push(s[e]),n.push(t[e]),c.push(a[e]),l.push(p[e])}let i=document.createElement("div"),r=document.createElement("h2"),o=document.createElement("textarea"),d=new class{constructor(){this.keyboardElement=this.makeKeyboardElement()}makeKeyboardElement(){let s,t=document.createElement("div"),a=0;t.classList.add("keyboard");for(let p in u)s=new e(p.trim(),n[a],c[a],l[a]),s.keyElement.classList.add(u[p]),s.keyElement.addEventListener("click",this.inputSymbol),t.append(s.keyElement),a++;return document.addEventListener("keydown",this.inputSymbol),document.addEventListener("keyup",this.inputSymbol),t}inputSymbol(e){if(Object.values(u).includes(e.code)||"click"===e.type){let s,t,a,p=document.getElementById("text-input");if("keydown"===e.type){s=document.querySelector("."+e.code),t=s.querySelectorAll("span");for(let e of t)!0===e.hidden||(a=e.textContent);if(s.classList.add("pressed"),p.blur(),"Backspace"===a){let e=p.value.split("");e.length>0&&e.length--,e=e.join(""),p.value=e}else"Delete"===a?p.focus():"Tab"===a?(p.focus(),p.value+="    ",p.focus()):"Home"===a?(p.focus(),p.setSelectionRange(0,0)):"End"===a?(p.focus(),p.setSelectionRange(p.value.length,p.value.length)):"Capslock"===a?s.classList.contains("pressed")&&s.classList.remove("pressed"):"Enter"===a?p.value+="\n":"ShiftLeft"===a||"ShiftRight"===a||"Ctrl"===a||"Alt"===a?p.focus():"Space"===a?p.value+=" ":(p.blur(),p.value+=a)}else if("keyup"===e.type)window.setTimeout((()=>{s=document.querySelector("."+e.code),"CapsLock"!==e.code&&s.classList.remove("pressed")}),60);else if("click"===e.type){if(a=null,s=e.target,t="SPAN"===s.tagName?a=s.innerHTML:t=s.querySelectorAll("span"),!a)for(let e of t)!0===e.hidden||(a=e.textContent);if(p.blur(),s.classList.add("pressed"),"Backspace"===a){let e=p.value.split("");e.length>0&&e.length--,e=e.join(""),p.value=e}else"Delete"===a?p.focus():"Tab"===a?(p.focus(),p.value+="    ",p.focus()):"Home"===a?(p.focus(),p.setSelectionRange(0,0)):"End"===a?(p.focus(),p.setSelectionRange(p.value.length,p.value.length)):"Capslock"===a?s.classList.contains("pressed")&&s.classList.remove("pressed"):"Enter"===a?p.value+="\n":"ShiftLeft"===a||"ShiftRight"===a||"Ctrl"===a||"Alt"===a?p.focus():"Space"===a?p.value+=" ":(p.blur(),p.value+=a);window.setTimeout((()=>{s.classList.remove("pressed")}),150)}}}},k=document.createElement("p");i.classList.add("wrapper"),r.textContent="RSS Virtual Keyboard",k.innerHTML="Created for Windows OS<br>ctrl + alt for changing language(not implemented)",document.body.append(i),i.append(r),o.id="text-input",i.append(o),i.append(d.keyboardElement),i.append(k)})();